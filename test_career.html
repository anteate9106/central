<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§ì—…ì ì„± ê²€ì‚¬ - ì²­ë…„ë“¤ ì„±ê²©ìœ í˜• ê²€ì‚¬ ì‹œìŠ¤í…œ</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* ì§ì—…ì ì„± ê²€ì‚¬ ì „ìš© ìŠ¤íƒ€ì¼ */
        .test-header {
            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
            margin-bottom: 40px;
        }

        .test-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .test-subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .progress-bar {
            background: #f0f0f0;
            border-radius: 10px;
            height: 8px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
            height: 100%;
            transition: width 0.3s ease;
        }

        .question-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .question-number {
            background: #6c757d;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--dark-color);
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .answer-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .answer-option {
            background: #f8f9fa;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-weight: 500;
        }

        .answer-option:hover {
            border-color: #6c757d;
            background: #f8f9fa;
        }

        .answer-option.selected {
            border-color: #6c757d;
            background: #6c757d;
            color: white;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #6c757d;
            color: #6c757d;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-outline:hover {
            background: #6c757d;
            color: white;
        }

        .result-container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
        }

        .result-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 20px;
        }

        .career-type {
            font-size: 2.5rem;
            font-weight: 700;
            color: #6c757d;
            margin-bottom: 20px;
        }

        .career-description {
            font-size: 1.1rem;
            color: var(--text-color);
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .career-areas {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .area-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .area-title {
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 10px;
        }

        .area-description {
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .job-suggestions {
            background: #e9ecef;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .job-suggestions h3 {
            color: var(--dark-color);
            margin-bottom: 15px;
        }

        .job-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
        }

        .job-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            text-align: center;
        }

        @media (max-width: 768px) {
            .test-title {
                font-size: 2rem;
            }
            
            .question-text {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- í—¤ë” -->
        <div class="main-header">
            <a href="test_selection.html" class="logo">
                <div class="logo-icon">ğŸ’¼</div>
                <span class="logo-text">ì§ì—…ì ì„± ê²€ì‚¬</span>
            </a>
            <button onclick="logout()" class="btn btn-danger btn-sm">ë¡œê·¸ì•„ì›ƒ</button>
        </div>

        <!-- í…ŒìŠ¤íŠ¸ í—¤ë” -->
        <div class="test-header">
            <h1 class="test-title">ì§ì—…ì ì„± ê²€ì‚¬</h1>
            <p class="test-subtitle">ìì‹ ì—ê²Œ ë§ëŠ” ì§ì—…ê³¼ ì§„ë¡œ ë°©í–¥ì„ ì°¾ì•„ë³´ì„¸ìš”</p>
        </div>

        <div class="test-container">
            <!-- ì§„í–‰ë¥  í‘œì‹œ -->
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>

            <!-- ì§ˆë¬¸ ì„¹ì…˜ -->
            <div id="questionSection" class="question-container">
                <div class="question-number" id="questionNumber">1</div>
                <div class="question-text" id="questionText">ì§ˆë¬¸ì´ ë¡œë“œë˜ëŠ” ì¤‘...</div>
                <div class="answer-options" id="answerOptions">
                    <!-- ë‹µë³€ ì˜µì…˜ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
                <div class="navigation-buttons">
                    <button class="btn-outline" id="prevButton" onclick="previousQuestion()" style="display: none;">ì´ì „</button>
                    <button class="btn" id="nextButton" onclick="nextQuestion()" disabled>ë‹¤ìŒ</button>
                </div>
            </div>

            <!-- ê²°ê³¼ ì„¹ì…˜ (ìˆ¨ê¹€) -->
            <div id="resultSection" class="result-container" style="display: none;">
                <h2 class="result-title">ê²€ì‚¬ ê²°ê³¼</h2>
                <div class="career-type" id="careerType">ì—°êµ¬í˜•</div>
                <div class="career-description" id="careerDescription">
                    ë‹¹ì‹ ì€ ì—°êµ¬í˜• ì§ì—…ì ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
                </div>
                <div class="career-areas" id="careerAreas">
                    <!-- ì§ì—…ì ì„± ì˜ì—­ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
                <div class="job-suggestions" id="jobSuggestions">
                    <!-- ì§ì—… ì¶”ì²œì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
                </div>
                <div class="navigation-buttons">
                    <button class="btn-outline" onclick="restartTest()">ë‹¤ì‹œ ê²€ì‚¬í•˜ê¸°</button>
                    <button class="btn btn-success" onclick="saveResult()">ê²°ê³¼ ì €ì¥</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/supabase-client.js"></script>
    <script>
        // ì§ì—…ì ì„± ê²€ì‚¬ ë°ì´í„° (Hollandì˜ 6ê°€ì§€ ì§ì—…ì ì„± ì´ë¡  ê¸°ë°˜)
        const careerQuestions = [
            {
                question: "ìƒˆë¡œìš´ ê¸°ìˆ ì´ë‚˜ ì§€ì‹ì„ ë°°ìš°ëŠ” ê²ƒì„",
                options: [
                    "ë§¤ìš° ì¢‹ì•„í•œë‹¤",
                    "ì¢‹ì•„í•œë‹¤",
                    "ë³´í†µì´ë‹¤",
                    "ì¢‹ì•„í•˜ì§€ ì•ŠëŠ”ë‹¤",
                    "ì „í˜€ ì¢‹ì•„í•˜ì§€ ì•ŠëŠ”ë‹¤"
                ]
            },
            {
                question: "ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ ë‚˜ëŠ”",
                options: [
                    "ë…¼ë¦¬ì  ë¶„ì„ì„ í†µí•´ ì ‘ê·¼í•œë‹¤",
                    "ì°½ì˜ì  ì•„ì´ë””ì–´ë¥¼ í™œìš©í•œë‹¤",
                    "ë‹¤ë¥¸ ì‚¬ëŒê³¼ í˜‘ë ¥í•œë‹¤",
                    "ì²´ê³„ì ìœ¼ë¡œ ê³„íší•œë‹¤",
                    "ì§ê´€ì ìœ¼ë¡œ íŒë‹¨í•œë‹¤"
                ]
            },
            {
                question: "ì—…ë¬´ í™˜ê²½ì—ì„œ ë‚˜ëŠ”",
                options: [
                    "ì¡°ìš©í•˜ê³  ì§‘ì¤‘í•  ìˆ˜ ìˆëŠ” ê³³ì„ ì„ í˜¸í•œë‹¤",
                    "í™œë™ì ì´ê³  ì—­ë™ì ì¸ ê³³ì„ ì„ í˜¸í•œë‹¤",
                    "ì‚¬ëŒë“¤ê³¼ ì†Œí†µí•  ìˆ˜ ìˆëŠ” ê³³ì„ ì„ í˜¸í•œë‹¤",
                    "ì•ˆì •ì ì´ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ ê³³ì„ ì„ í˜¸í•œë‹¤",
                    "ì°½ì˜ì ì´ê³  ììœ ë¡œìš´ ê³³ì„ ì„ í˜¸í•œë‹¤"
                ]
            },
            {
                question: "ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ ì¼í•  ë•Œ ë‚˜ëŠ”",
                options: [
                    "í˜¼ì ì¼í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤",
                    "íŒ€ì˜ ë¦¬ë” ì—­í• ì„ í•œë‹¤",
                    "íŒ€ì›ë“¤ê³¼ í˜‘ë ¥í•œë‹¤",
                    "ì§€ì‹œë°›ê³  ë”°ë¥´ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤",
                    "ììœ ë¡­ê²Œ ì˜ê²¬ì„ í‘œí˜„í•œë‹¤"
                ]
            },
            {
                question: "ì„±ê³¼ë¥¼ í‰ê°€ë°›ì„ ë•Œ ë‚˜ëŠ”",
                options: [
                    "ê°œì¸ì˜ ì „ë¬¸ì„±ê³¼ ëŠ¥ë ¥ì„ ì¤‘ì‹œí•œë‹¤",
                    "ë¦¬ë”ì‹­ê³¼ ì„±ì·¨ë¥¼ ì¤‘ì‹œí•œë‹¤",
                    "íŒ€ì›Œí¬ì™€ í˜‘ë ¥ì„ ì¤‘ì‹œí•œë‹¤",
                    "ì•ˆì •ì„±ê³¼ ì‹ ë¢°ì„±ì„ ì¤‘ì‹œí•œë‹¤",
                    "ì°½ì˜ì„±ê³¼ í˜ì‹ ì„ ì¤‘ì‹œí•œë‹¤"
                ]
            },
            {
                question: "ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•  ë•Œ ë‚˜ëŠ”",
                options: [
                    "ê¹Šì´ ìˆê²Œ ì—°êµ¬í•˜ê³  ë¶„ì„í•œë‹¤",
                    "ë¹ ë¥´ê²Œ ì‹¤í–‰í•˜ê³  ê²°ê³¼ë¥¼ ë§Œë“ ë‹¤",
                    "íŒ€ì›ë“¤ê³¼ í•¨ê»˜ ê³„íší•œë‹¤",
                    "ë‹¨ê³„ë³„ë¡œ ì²´ê³„ì ìœ¼ë¡œ ì§„í–‰í•œë‹¤",
                    "ì°½ì˜ì  ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•œë‹¤"
                ]
            },
            {
                question: "ì—…ë¬´ì—ì„œ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê²ƒì€",
                options: [
                    "ì „ë¬¸ì„±ê³¼ ì •í™•ì„±",
                    "ì„±ê³¼ì™€ ì„±ì·¨",
                    "ì‚¬ëŒê³¼ ê´€ê³„",
                    "ì•ˆì •ì„±ê³¼ ë³´ì¥",
                    "ì°½ì˜ì„±ê³¼ í‘œí˜„"
                ]
            },
            {
                question: "ê°ˆë“± ìƒí™©ì—ì„œ ë‚˜ëŠ”",
                options: [
                    "ê°ê´€ì  ë¶„ì„ìœ¼ë¡œ í•´ê²°í•œë‹¤",
                    "ê°•ë ¥í•˜ê²Œ ì£¼ë„í•œë‹¤",
                    "ì¤‘ì¬ì™€ ì¡°ì •ì„ í•œë‹¤",
                    "ê·œì¹™ê³¼ ì ˆì°¨ë¥¼ ë”°ë¥¸ë‹¤",
                    "ì°½ì˜ì  í•´ê²°ì±…ì„ ì°¾ëŠ”ë‹¤"
                ]
            },
            {
                question: "ìƒˆë¡œìš´ ë„ì „ì„ ë°›ì•„ë“¤ì¼ ë•Œ ë‚˜ëŠ”",
                options: [
                    "ì‹ ì¤‘í•˜ê²Œ ê²€í† í•œ í›„ ê²°ì •í•œë‹¤",
                    "ì¦‰ì‹œ ë„ì „ì„ ë°›ì•„ë“¤ì¸ë‹¤",
                    "íŒ€ì›ë“¤ê³¼ ìƒì˜í•œë‹¤",
                    "ì•ˆì „ì„±ì„ í™•ì¸í•œë‹¤",
                    "í¥ë¯¸ë¡œìš´ì§€ ë¨¼ì € íŒë‹¨í•œë‹¤"
                ]
            },
            {
                question: "ì—…ë¬´ì—ì„œ ë§Œì¡±ê°ì„ ëŠë¼ëŠ” ìˆœê°„ì€",
                options: [
                    "ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í–ˆì„ ë•Œ",
                    "ëª©í‘œë¥¼ ë‹¬ì„±í–ˆì„ ë•Œ",
                    "íŒ€ì›ë“¤ê³¼ ì¢‹ì€ ê´€ê³„ë¥¼ ë§ºì—ˆì„ ë•Œ",
                    "ì•ˆì •ì ìœ¼ë¡œ ì¼ì„ ì™„ë£Œí–ˆì„ ë•Œ",
                    "ìƒˆë¡œìš´ ì•„ì´ë””ì–´ë¥¼ ì‹¤í˜„í–ˆì„ ë•Œ"
                ]
            }
        ];

        // Hollandì˜ 6ê°€ì§€ ì§ì—…ì ì„± ìœ í˜•
        const careerTypes = {
            'realistic': {
                name: 'í˜„ì‹¤í˜•',
                description: 'êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ ì¼ì„ ì„ í˜¸í•˜ë©°, ì†ìœ¼ë¡œ ë§Œë“œëŠ” ì‘ì—…ì„ ì¢‹ì•„í•©ë‹ˆë‹¤.',
                areas: [
                    { title: 'íŠ¹ì§•', description: 'ì‹¤ìš©ì , í˜„ì‹¤ì , êµ¬ì²´ì ' },
                    { title: 'ê°•ì ', description: 'ê¸°ìˆ ì  ëŠ¥ë ¥, ì‹¤ë¬´ ê²½í—˜' },
                    { title: 'ê°€ì¹˜ê´€', description: 'ì•ˆì •ì„±, ì‹¤ìš©ì„±, êµ¬ì²´ì„±' },
                    { title: 'í™˜ê²½', description: 'êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ì¸ í™˜ê²½' }
                ],
                jobs: ['ì—”ì§€ë‹ˆì–´', 'ê¸°ìˆ ì', 'ë†ì—…ì¸', 'ìš´ì „ì‚¬', 'ìš”ë¦¬ì‚¬', 'ê±´ì¶•ê°€', 'ì˜ì‚¬', 'ê°„í˜¸ì‚¬']
            },
            'investigative': {
                name: 'ì—°êµ¬í˜•',
                description: 'ì§€ì  í˜¸ê¸°ì‹¬ì´ ê°•í•˜ê³  ë¶„ì„ì  ì‚¬ê³ ë¥¼ í†µí•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.',
                areas: [
                    { title: 'íŠ¹ì§•', description: 'ë¶„ì„ì , ì§€ì , ë…ë¦½ì ' },
                    { title: 'ê°•ì ', description: 'ì—°êµ¬ ëŠ¥ë ¥, ë¶„ì„ë ¥, ë…¼ë¦¬ì„±' },
                    { title: 'ê°€ì¹˜ê´€', description: 'ì§€ì‹, ì§„ì‹¤, ê°ê´€ì„±' },
                    { title: 'í™˜ê²½', description: 'í•™ë¬¸ì ì´ê³  ì—°êµ¬ì ì¸ í™˜ê²½' }
                ],
                jobs: ['ê³¼í•™ì', 'ì—°êµ¬ì›', 'ì˜ì‚¬', 'êµìˆ˜', 'í”„ë¡œê·¸ë˜ë¨¸', 'ë¶„ì„ê°€', 'ì‹¬ë¦¬í•™ì', 'í†µê³„í•™ì']
            },
            'artistic': {
                name: 'ì˜ˆìˆ í˜•',
                description: 'ì°½ì˜ì ì´ê³  í‘œí˜„ì ì¸ í™œë™ì„ ì„ í˜¸í•˜ë©°, ììœ ë¡­ê³  ìœ ì—°í•œ í™˜ê²½ì„ ì¢‹ì•„í•©ë‹ˆë‹¤.',
                areas: [
                    { title: 'íŠ¹ì§•', description: 'ì°½ì˜ì , í‘œí˜„ì , ììœ ë¡œìš´' },
                    { title: 'ê°•ì ', description: 'ì°½ì˜ì„±, í‘œí˜„ë ¥, ìƒìƒë ¥' },
                    { title: 'ê°€ì¹˜ê´€', description: 'ë¯¸, ì°½ì˜ì„±, ê°œì„±' },
                    { title: 'í™˜ê²½', description: 'ììœ ë¡­ê³  ì°½ì˜ì ì¸ í™˜ê²½' }
                ],
                jobs: ['ë””ìì´ë„ˆ', 'ì‘ê°€', 'ìŒì•…ê°€', 'í™”ê°€', 'ë°°ìš°', 'ì‚¬ì§„ê°€', 'í¸ì§‘ì', 'ê´‘ê³ ê¸°íšì']
            },
            'social': {
                name: 'ì‚¬íšŒí˜•',
                description: 'ë‹¤ë¥¸ ì‚¬ëŒì„ ë„ìš°ê³  êµìœ¡í•˜ëŠ” ì¼ì„ ì„ í˜¸í•˜ë©°, í˜‘ë ¥ê³¼ ì†Œí†µì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.',
                areas: [
                    { title: 'íŠ¹ì§•', description: 'í˜‘ë ¥ì , êµìœ¡ì , ë„ì›€ì„ ì£¼ëŠ”' },
                    { title: 'ê°•ì ', description: 'ì†Œí†µ ëŠ¥ë ¥, ê³µê°ë ¥, êµìœ¡ë ¥' },
                    { title: 'ê°€ì¹˜ê´€', description: 'ë´‰ì‚¬, í˜‘ë ¥, ì‚¬íšŒì  ê°€ì¹˜' },
                    { title: 'í™˜ê²½', description: 'ì‚¬ëŒ ì¤‘ì‹¬ì˜ í™˜ê²½' }
                ],
                jobs: ['êµì‚¬', 'ìƒë‹´ì‚¬', 'ì‚¬íšŒë³µì§€ì‚¬', 'ì˜ì‚¬', 'ê°„í˜¸ì‚¬', 'ì‹¬ë¦¬í•™ì', 'ì¸ì‚¬ë‹´ë‹¹ì', 'ê³ ê°ì„œë¹„ìŠ¤']
            },
            'enterprising': {
                name: 'ì§„ì·¨í˜•',
                description: 'ë¦¬ë”ì‹­ê³¼ ê²½ì˜ ëŠ¥ë ¥ì„ ë°œíœ˜í•˜ì—¬ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.',
                areas: [
                    { title: 'íŠ¹ì§•', description: 'ë¦¬ë”ì‹­, ê²½ì˜ì , ëª©í‘œ ì§€í–¥ì ' },
                    { title: 'ê°•ì ', description: 'ë¦¬ë”ì‹­, ì„¤ë“ë ¥, ê²½ì˜ ëŠ¥ë ¥' },
                    { title: 'ê°€ì¹˜ê´€', description: 'ì„±ì·¨, ê¶Œë ¥, ê²½ì œì  ì„±ê³µ' },
                    { title: 'í™˜ê²½', description: 'ê²½ìŸì ì´ê³  ë„ì „ì ì¸ í™˜ê²½' }
                ],
                jobs: ['ê²½ì˜ì', 'ì˜ì—…ì‚¬ì›', 'ì •ì¹˜ê°€', 'ë³€í˜¸ì‚¬', 'íˆ¬ìì', 'ë§ˆì¼€í„°', 'CEO', 'ì‚¬ì—…ê°€']
            },
            'conventional': {
                name: 'ê´€ìŠµí˜•',
                description: 'ì²´ê³„ì ì´ê³  ì •í™•í•œ ì¼ì„ ì„ í˜¸í•˜ë©°, ì•ˆì •ì ì´ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ í™˜ê²½ì„ ì¢‹ì•„í•©ë‹ˆë‹¤.',
                areas: [
                    { title: 'íŠ¹ì§•', description: 'ì²´ê³„ì , ì •í™•í•œ, ì•ˆì •ì ' },
                    { title: 'ê°•ì ', description: 'ì •í™•ì„±, ì²´ê³„ì„±, ì‹ ë¢°ì„±' },
                    { title: 'ê°€ì¹˜ê´€', description: 'ì•ˆì •ì„±, ì§ˆì„œ, ì „í†µ' },
                    { title: 'í™˜ê²½', description: 'êµ¬ì¡°í™”ë˜ê³  ì•ˆì •ì ì¸ í™˜ê²½' }
                ],
                jobs: ['íšŒê³„ì‚¬', 'ì€í–‰ì›', 'ì‚¬ë¬´ì§', 'ë„ì„œê´€ì‚¬ì„œ', 'ë¹„ì„œ', 'ì„¸ë¬´ì‚¬', 'ê³µë¬´ì›', 'ë°ì´í„° ì…ë ¥ì›']
            }
        };

        // ì „ì—­ ë³€ìˆ˜
        let currentQuestion = 0;
        let answers = [];
        let currentUser = null;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeTest();
        });

        // í…ŒìŠ¤íŠ¸ ì´ˆê¸°í™”
        async function initializeTest() {
            try {
                // ì‚¬ìš©ì ì •ë³´ í™•ì¸
                if (window.supabase && window.supabase.isLoggedIn()) {
                    currentUser = await window.supabase.getCurrentUser();
                    if (!currentUser) {
                        redirectToLogin();
                        return;
                    }
                } else {
                    redirectToLogin();
                    return;
                }

                // ì²« ë²ˆì§¸ ì§ˆë¬¸ í‘œì‹œ
                showQuestion(0);
            } catch (error) {
                console.error('í…ŒìŠ¤íŠ¸ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                redirectToLogin();
            }
        }

        // ì§ˆë¬¸ í‘œì‹œ
        function showQuestion(questionIndex) {
            const question = careerQuestions[questionIndex];
            
            document.getElementById('questionNumber').textContent = questionIndex + 1;
            document.getElementById('questionText').textContent = question.question;
            
            // ë‹µë³€ ì˜µì…˜ ìƒì„±
            const answerOptions = document.getElementById('answerOptions');
            answerOptions.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'answer-option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectAnswer(index);
                answerOptions.appendChild(optionElement);
            });
            
            // ì´ì „ ë‹µë³€ì´ ìˆìœ¼ë©´ ì„ íƒ ìƒíƒœ ë³µì›
            if (answers[questionIndex] !== undefined) {
                const selectedOption = answerOptions.children[answers[questionIndex]];
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                }
            }
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateProgress();
            
            // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            updateNavigationButtons();
        }

        // ë‹µë³€ ì„ íƒ
        function selectAnswer(answerIndex) {
            // ê°™ì€ ì§ˆë¬¸ì˜ ë‹¤ë¥¸ ì˜µì…˜ë“¤ í•´ì œ
            const answerOptions = document.querySelectorAll('.answer-option');
            answerOptions.forEach(option => option.classList.remove('selected'));
            
            // ì„ íƒëœ ì˜µì…˜ í™œì„±í™”
            event.target.classList.add('selected');
            
            // ë‹µë³€ ì €ì¥
            answers[currentQuestion] = answerIndex;
            
            // ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”
            document.getElementById('nextButton').disabled = false;
        }

        // ë‹¤ìŒ ì§ˆë¬¸
        function nextQuestion() {
            if (answers[currentQuestion] === undefined) {
                alert('ë‹µë³€ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (currentQuestion < careerQuestions.length - 1) {
                currentQuestion++;
                showQuestion(currentQuestion);
            } else {
                // ë§ˆì§€ë§‰ ì§ˆë¬¸ì´ë©´ ê²°ê³¼ ê³„ì‚°
                calculateResult();
            }
        }

        // ì´ì „ ì§ˆë¬¸
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion(currentQuestion);
            }
        }

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateProgress() {
            const progress = ((currentQuestion + 1) / careerQuestions.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateNavigationButtons() {
            const prevButton = document.getElementById('prevButton');
            const nextButton = document.getElementById('nextButton');
            
            prevButton.style.display = currentQuestion > 0 ? 'block' : 'none';
            
            if (currentQuestion === careerQuestions.length - 1) {
                nextButton.textContent = 'ê²°ê³¼ ë³´ê¸°';
            } else {
                nextButton.textContent = 'ë‹¤ìŒ';
            }
        }

        // ê²°ê³¼ ê³„ì‚°
        function calculateResult() {
            // ê° ì§ì—…ì ì„± ìœ í˜•ë³„ ì ìˆ˜ ê³„ì‚°
            const scores = {
                realistic: 0,
                investigative: 0,
                artistic: 0,
                social: 0,
                enterprising: 0,
                conventional: 0
            };
            
            // ë‹µë³€ì— ë”°ë¼ ì ìˆ˜ ê³„ì‚° (ê°„ë‹¨í•œ ë¡œì§)
            answers.forEach((answer, index) => {
                if (answer === 0) scores.investigative += 1;
                else if (answer === 1) scores.enterprising += 1;
                else if (answer === 2) scores.social += 1;
                else if (answer === 3) scores.conventional += 1;
                else if (answer === 4) scores.artistic += 1;
            });
            
            // ê°€ì¥ ë†’ì€ ì ìˆ˜ì˜ ìœ í˜• ì°¾ê¸°
            const maxScore = Math.max(...Object.values(scores));
            const careerType = Object.keys(scores).find(key => scores[key] === maxScore);
            
            // ê²°ê³¼ í‘œì‹œ
            showResult(careerType, scores);
        }

        // ê²°ê³¼ í‘œì‹œ
        function showResult(careerType, scores) {
            const typeInfo = careerTypes[careerType];
            
            document.getElementById('careerType').textContent = typeInfo.name;
            document.getElementById('careerDescription').innerHTML = 
                `${typeInfo.description}<br><small>ì ìˆ˜: ${scores[careerType]}ì </small>`;
            
            // ì§ì—…ì ì„± ì˜ì—­ í‘œì‹œ
            const areasContainer = document.getElementById('careerAreas');
            areasContainer.innerHTML = '';
            
            typeInfo.areas.forEach(area => {
                const areaCard = document.createElement('div');
                areaCard.className = 'area-card';
                areaCard.innerHTML = `
                    <div class="area-title">${area.title}</div>
                    <div class="area-description">${area.description}</div>
                `;
                areasContainer.appendChild(areaCard);
            });
            
            // ì§ì—… ì¶”ì²œ í‘œì‹œ
            const jobSuggestionsContainer = document.getElementById('jobSuggestions');
            jobSuggestionsContainer.innerHTML = `
                <h3>ğŸ’¼ ì¶”ì²œ ì§ì—…</h3>
                <div class="job-list">
                    ${typeInfo.jobs.map(job => `<div class="job-item">${job}</div>`).join('')}
                </div>
            `;
            
            // ì§ˆë¬¸ ì„¹ì…˜ ìˆ¨ê¸°ê³  ê²°ê³¼ ì„¹ì…˜ í‘œì‹œ
            document.getElementById('questionSection').style.display = 'none';
            document.getElementById('resultSection').style.display = 'block';
        }

        // ê²°ê³¼ ì €ì¥
        async function saveResult() {
            try {
                if (window.supabase && currentUser) {
                    const careerTypeElement = document.getElementById('careerType');
                    const resultData = {
                        type: careerTypeElement.textContent,
                        description: document.getElementById('careerDescription').textContent
                    };
                    
                    await window.supabase.createTestResult({
                        user_id: currentUser.id,
                        test_type: 'Career',
                        result_data: JSON.stringify(resultData),
                        score_data: JSON.stringify(answers)
                    });
                    
                    alert('ê²€ì‚¬ ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                    window.location.href = 'test_selection.html';
                } else {
                    alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    redirectToLogin();
                }
            } catch (error) {
                console.error('ê²°ê³¼ ì €ì¥ ì˜¤ë¥˜:', error);
                alert('ê²°ê³¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // í…ŒìŠ¤íŠ¸ ë‹¤ì‹œ ì‹œì‘
        function restartTest() {
            currentQuestion = 0;
            answers = [];
            document.getElementById('questionSection').style.display = 'block';
            document.getElementById('resultSection').style.display = 'none';
            showQuestion(0);
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            if (window.supabase) {
                window.supabase.removeToken();
            }
            window.location.href = 'index.html';
        }

        // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        function redirectToLogin() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
